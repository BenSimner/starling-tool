    lock() {
      {emp}
        <t = ticket++;>
      {holdTickIf(true, t)}
        ;
        (
          {holdTickIf(true, t)}
            <s = serving;>
          {holdTickIf(s != t) * holdLockIf(s = t) * termIf(s = t)}
        )*
      {holdLockIf(true)}
    }

    unlock() {
      {holdLock()}
        <serving++>
      {emp}
    }