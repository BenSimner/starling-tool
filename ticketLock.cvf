    method lock() {
      {| emp |}
        <t = ticket++>;
      {| holdTick(t) |}
        do {
          {| holdTick(t) |}
            <s = serving>;
          {| if s = t then holdLock else holdTick(t) |}
        } while (s = t)
      {| holdLock |}
    }

    method unlock() {
      {| holdLock() |}
        <serving++>;
      {| emp |}
    }
